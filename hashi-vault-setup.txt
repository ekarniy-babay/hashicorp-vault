# https://www.bogotobogo.com/DevOps/Docker/Docker-Vault-Consul-C.php
### Create MacVLAN network:
## https://stackoverflow.com/questions/27937185/assign-static-ip-to-docker-container
docker network create -d macvlan --subnet=192.168.2.0/24 --ip-range=192.168.2.240/28 --gateway=192.168.2.1 -o parent=eth0 docker-net1

# remove containers using wildcard
docker stop $(docker ps -a --filter name=matter* --filter status=running -aq)
docker rm $(docker ps -a --filter name=matter* -aq)


### Create volumes
docker volume create vault-config
docker volume create vault-policies
docker volume create vault-data
docker volume create vault-logs
docker volume create consul-config
docker volume create consul-data
docker volume create backup-data

## copy files to volume
docker run -d --rm --name dummy -v vault-config:/root ubuntu tail -f /dev/null
#docker exec -it dummy /bin/bash
docker cp ./vault/config/vault-config.json dummy:/root
docker stop dummy

docker run -d --rm --name dummy -v consul-config:/root ubuntu tail -f /dev/null
docker cp ./consul/config/consul-config.json dummy:/root
docker cp ./consul/config/consul-config.json dummy:/root/config.json
docker stop dummy

docker exec -it vault /bin/bash
